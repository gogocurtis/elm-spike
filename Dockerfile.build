FROM node:8

USER root
WORKDIR /app

RUN npm install -g yarn
RUN yarn global add elm elm-test

COPY elm-package.json elm-package.json
RUN cat /app/elm-package.json
RUN elm-package install --yes


COPY public/ public/
COPY src/ src/
RUN elm-make  src/Main.elm --output public/assets/elm.js

WORKDIR /app/public
RUN tar zcf build.tar.gz .

